(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9124)}])},9124:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5893),a=n(9008),o=n(7294),i=n(261),c=n.n(i);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e){var t=e.query,n=(0,o.useState)([]),a=n[0],i=n[1],s=(0,o.useState)({column:"",direction:""}),u=s[0],d=s[1],h=function(e){return e===u.column&&"asc"===u.direction?(0,r.jsx)(r.Fragment,{children:"\u25b2"}):e===u.column&&"desc"===u.direction?(0,r.jsx)(r.Fragment,{children:"\u25bc"}):void 0};return(0,o.useEffect)((function(){var e=l(a);e.sort((function(e,t){switch(u.direction){case"asc":return e[u.column]<t[u.column]?-1:e[u.column]>t[u.column]?1:0;case"desc":return e[u.column]>t[u.column]?-1:e[u.column]<t[u.column]?1:0}})),i(e)}),[u]),(0,o.useEffect)((function(){if(t){var e=new URL("https://openlibrary.org/search.json"),n={q:t,fields:"author_name,title,cover_i,publish_date"};Object.keys(n).forEach((function(t){return e.searchParams.append(t,n[t])})),fetch(e).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){var t=e.docs;i(t.map((function(e){return e.publish_date&&e.publish_date.sort((function(e,t){return new Date(t)-new Date(e)})),e})))})).catch((function(e){return console.error(e)}))}else i([])}),[t]),a.length?(0,r.jsxs)("table",{className:c()["fea-book-table"],cellSpacing:0,children:[(0,r.jsxs)("colgroup",{children:[(0,r.jsx)("col",{span:"1",style:{width:"20%"}}),(0,r.jsx)("col",{span:"1",style:{width:"30%"}}),(0,r.jsx)("col",{span:"1",style:{width:"20%"}}),(0,r.jsx)("col",{span:"1",style:{width:"25%"}})]}),(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{onClick:function(){return d({column:"title",direction:"title"===u.column&&"asc"===u.direction?"desc":"asc"})},children:["Title ",h("title")]}),(0,r.jsx)("th",{children:"Book Cover"}),(0,r.jsx)("th",{children:"Author"}),(0,r.jsxs)("th",{onClick:function(){return d({column:"publish_date",direction:"publish_date"===u.column&&"asc"===u.direction?"desc":"asc"})},children:["Published Date ",h("publish_date")]})]})}),(0,r.jsx)("tbody",{children:a&&a.map((function(e,t){var n;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{tabIndex:0,children:e.title}),(0,r.jsx)("td",{tabIndex:0,children:(0,r.jsx)("img",{alt:"".concat(e.title," by: ").concat(e.author_name,". Published: ").concat(e.publish_date?e.publish_date:"N/A"),src:e.cover_i&&"https://covers.openlibrary.org/b/id/".concat(e.cover_i,".jpg")})}),(0,r.jsx)("td",{tabIndex:0,children:(null===(n=e.author_name)||void 0===n?void 0:n.join(", "))||"No Author Available..."}),(0,r.jsx)("td",{tabIndex:0,children:e.publish_date?e.publish_date[0]:"No Date Available..."})]},t+(e.author_name||""))}))})]}):(0,r.jsx)("p",{className:c()["fea-no-books"],children:"No Books to Display..."})},d=n(1812),h=n.n(d),f=n(6486),p=n.n(f),b=function(e){var t=e.onChange,n=e.label,a=e.style,i=(0,o.useRef)(p().debounce((function(e){return t(e)}),500)).current;return(0,r.jsxs)("div",{className:h()["fea-input-wrapper"],style:a,children:[(0,r.jsx)("input",{className:h()["fea-input"],name:"bookSearch",placeholder:n,id:"bookSearch",onChange:function(e){i(e)},type:"text",tabIndex:"0"}),(0,r.jsx)("label",{htmlFor:"bookSearch",className:h()["fea-input-label"],children:n})]})},m=n(7041),_=n.n(m);function x(){var e=(0,o.useState)(),t=e[0],n=e[1];return(0,r.jsxs)("div",{children:[(0,r.jsxs)(a.default,{children:[(0,r.jsx)("title",{children:"React Assessment - Book Search"}),(0,r.jsx)("meta",{name:"description",content:"React Assessment for Chris Doyle"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("main",{className:_()["fea-layout"],children:[(0,r.jsx)("p",{className:_()["fea-header"],children:"OpenLibrary Book Search"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(b,{onChange:function(e){var t=e.target.value;return n(t.replaceAll(" ","+").trim())},label:"Search Here!","aria-label":"Search Books Here",style:{marginBottom:"1.5em"}}),(0,r.jsx)(u,{query:t})]})]})]})}},261:function(e){e.exports={"fea-book-table":"book-table_fea-book-table__x8cCj","fea-no-books":"book-table_fea-no-books__puvtD"}},1812:function(e){e.exports={"fea-input-wrapper":"input_fea-input-wrapper__SvTFL","fea-input":"input_fea-input__0Vv1I","fea-input-label":"input_fea-input-label__59gDS"}},7041:function(e){e.exports={"fea-layout":"styles_fea-layout__kNJz2","fea-header":"styles_fea-header__6U_s0"}}},function(e){e.O(0,[662,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);